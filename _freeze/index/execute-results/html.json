{
  "hash": "9d6cbd67eb9cb2bac8392d8f945a3ee6",
  "result": {
    "engine": "knitr",
    "markdown": "---\nformat:\n  revealjs:\n    incremental: false\n    css: custom.css\nexecute: \n  echo: true\n---\n\n\n\n\n## babelquartoによる<br>quartoウエブサイトの<br>多言語化 {background-color=\"black\" background-image=\"images/alexandre-debieve-UmX-OgGODfM-unsplash.jpg\" background-size=\"contain\" background-repeat=\"no-repeat\" background-position=\"right\"}\n\nニッタ ジョエル\n\n::: {.aside}\n\nImage: [Alexandre Debiève on Unsplash](https://unsplash.com/ja/%E5%86%99%E7%9C%9F/%E3%83%A9%E3%82%B8%E3%82%AA%E3%83%97%E3%83%AC%E3%83%BC%E3%83%A4%E3%83%BC%E3%83%AD%E3%83%83%E3%83%88-UmX-OgGODfM)\n\n:::\n\n## 自己紹介：ニッタ ジョエル\n\n- 千葉大学 准教授\n- シダ植物の進化や生態学\n- Rパッケージ開発（進化生態学系）\n\n## Quarto はすごいぞ\n\n:::: {.columns}\n\n::: {.column width=\"40%\"}\n- QuartoはRやPythonの計算結果を直接文章に入れるツール\n- 使い方が非常に多様で豊富\n  - HTML\n  - PDF\n  - MS Word\n:::\n\n::: {.column width=\"60%\"}\n![](https://rstudio.github.io/cheatsheets/html/images/quarto-illustration.png)\n:::\n\n::::\n\n## Quarto の多言語機能がまだ出来ていない\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n- しかし、Quartoは比較的新しいため、欠けている機能もあります。\n\n- 備え付けで**多言語機能**がありません\n:::\n\n::: {.column width=\"50%\"}\n![](images/multi_lang_issue.png){width=90%}\n:::\n\n[<https://github.com/quarto-dev/quarto-cli/issues/275>]{.medsmall}\n\n::::\n\n## 注意\n\n- いつか多言語機能がQuartoに加わる可能性があります\n\n- その場合、`babelquarto`は要らなくなるでしょう\n\n- でも開発スクジュールが分かりませんので、多言語のニーズが今あれば使ってもいいと思います\n\n## `babelquarto`\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n- Quarto BookかWebsite**各言語**のバージョンを**レンダーする**\n\n- 翻訳とは別\n\n- Quartoのpluginではなく、Rパッケージ\n:::\n\n::: {.column width=\"50%\"}\n![](images/babelquarto_pagedown.png)\n:::\n\n::::\n\n## 例：ソフトウェア・カーペントリー日本 {.medsmall}\n\n<iframe src=\"https://swcarpentry-ja.github.io/\" width=\"100%\" height=\"500px\"></iframe>\n\n[<https://swcarpentry-ja.github.io/>]{.large}\n\n# babelquarto demo \n\n## 基本的なサイトを作る\n\n\n::: {.cell}\n\n:::\n\n\n:::: {.columns}\n\n::: {.column width=\"50%\" .medsmall}\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(quarto)\nquarto_create_project(\n  name = \"example\",\n  type = \"website\",\n  no_prompt = TRUE,\n  quiet = TRUE\n)\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\" .medsmall}\n\n::: {.cell filename='example/_quarto.yml'}\n\n```{.r .cell-code}\nproject:\n  type: website\n\nwebsite:\n  title: \"Example\"\n  navbar:\n    left:\n      - href: index.qmd\n        text: Home\n      - about.qmd\n\nformat:\n  html:\n    theme: cosmo\n    css: styles.css\n    toc: true\n```\n:::\n\n:::\n\n::::\n\n## 主言語を登録する\n\n:::: {.columns}\n\n::: {.column width=\"50%\" .medsmall}\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(babelquarto)\nregister_main_language(\n  main_language = \"ja\",\n  project_path = \"example\"\n)\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\" .medsmall}\n\n::: {.cell filename='example/_quarto.yml'}\n\n```{.r .cell-code}\nproject:\n  type: website\n\nwebsite:\n  title: \"Example\"\n  navbar:\n    left:\n      - href: index.qmd\n        text: Home\n      - about.qmd\n\nformat:\n  html:\n    theme: cosmo\n    css: styles.css\n    toc: true\n\n\n\n\nbabelquarto:\n  languagecodes:\n  - name: ja\n    text: \"Version in ja\"\n  mainlanguage: 'ja'\nlang: ja\n```\n:::\n\n:::\n\n::::\n\n## 翻訳言語を追加する\n\n:::: {.columns}\n\n::: {.column width=\"50%\" .medsmall}\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(babelquarto)\nregister_further_languages(\n  further_languages = c(\"en\"),\n  project_path = \"example\"\n)\n```\n:::\n\n\n:::\n\n::: {.column width=\"50%\" .medsmall}\n\n::: {.cell filename='example/_quarto.yml'}\n\n```{.r .cell-code}\nproject:\n  type: website\n\nwebsite:\n  title: \"Example\"\n  navbar:\n    left:\n      - href: index.qmd\n        text: Home\n      - about.qmd\n\nformat:\n  html:\n    theme: cosmo\n    css: styles.css\n    toc: true\n\n\n\n\nbabelquarto:\n  languagecodes:\n  - name: en\n    text: \"Version in en\"\n  - name: ja\n    text: \"Version in ja\"\n  mainlanguage: 'ja'\n  languages: ['en']\ntitle-en: title in en\ndescription-en: description in en\nauthor-en: author in en\nlang: ja\n```\n:::\n\n:::\n\n::::\n\n## _quarto.ymlを編集する\n\n:::: {.columns .medsmall}\n\n::: {.column width=\"50%\"}\n\n::: {.cell filename='example/_quarto.yml'}\n\n```{.r .cell-code  code-line-numbers=\"|5,24,26,29-30\"}\nproject:\n  type: website\n\nwebsite:\n  title: \"Example\"\n  navbar:\n    left:\n      - href: index.qmd\n        text: Home\n      - about.qmd\n\nformat:\n  html:\n    theme: cosmo\n    css: styles.css\n    toc: true\n\n\n\n\nbabelquarto:\n  languagecodes:\n  - name: en\n    text: \"Version in en\"\n  - name: ja\n    text: \"Version in ja\"\n  mainlanguage: 'ja'\n  languages: ['en']\ntitle-en: title in en\ndescription-en: description in en\nauthor-en: author in en\nlang: ja\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n\n::: {.cell filename='example/_quarto.yml'}\n\n```{.r .cell-code  code-line-numbers=\"|5,24,26,29-30\"}\nproject:\n  type: website\n\nwebsite:\n  title: \"テスト用のサイト\"\n  navbar:\n    left:\n      - href: index.qmd\n        text: Home\n      - about.qmd\n\nformat:\n  html:\n    theme: cosmo\n    css: styles.css\n    toc: true\n\n\n\n\nbabelquarto:\n  languagecodes:\n  - name: en\n    text: \"English\"\n  - name: ja\n    text: \"日本語\"\n  mainlanguage: 'ja'\n  languages: ['en']\ntitle-en: Test Site\ndescription-en: My test website\nauthor-en: Joel Nitta\nlang: ja\n```\n:::\n\n\n:::\n\n::::\n\n## 翻訳ファイルを追加する\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nexample\n├── _quarto.yml\n├── about.qmd\n├── index.qmd\n└── styles.css\n```\n\n\n:::\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nexample\n├── _quarto.yml\n├── about.qmd\n├── index.en.qmd\n├── index.qmd\n└── styles.css\n```\n\n\n:::\n:::\n\n\n:::\n\n::::\n\n---\n\n:::: {.columns .medsmall}\n\n::: {.column width=\"50%\"}\n\n::: {.cell filename='example/index.qmd'}\n\n```{.r .cell-code}\n---\ntitle: \"例\"\n---\n\nこれは Quarto のウェブサイトです。\n\nQuarto のウェブサイトについて詳しく知りたい場合は、<https://quarto.org/docs/websites> をご覧ください。\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell filename='example/index.en.qmd'}\n\n```{.r .cell-code}\n---\ntitle: \"Example\"\n---\n\nThis is a Quarto website.\n\nTo learn more about Quarto websites visit <https://quarto.org/docs/websites>.\n```\n:::\n\n\n:::\n\n::::\n\n## レンダーする\n\n注意：`quarto render`が使えません\n\n`[WARNING] Could not load translations for ja data file translations/ja.yaml not found`を無視して良い\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrender_website(project_path = \"example\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\u001b[1m\u001b[34m\n[1/2] index.qmd\u001b[39m\u001b[22m\n[WARNING] Could not load translations for ja\n  data file translations/ja.yaml not found\n[WARNING] The term Abstract has no translation defined.\n\u001b[1m\u001b[34m\n[2/2] about.qmd\u001b[39m\u001b[22m\n[WARNING] Could not load translations for ja\n  data file translations/ja.yaml not found\n[WARNING] The term Abstract has no translation defined.\n\nOutput created: _site/index.html\n\n\u001b[1mpandoc \u001b[22m\n  to: html\n  output-file: index.html\n  standalone: true\n  title-prefix: Test Site\n  section-divs: true\n  html-math-method: mathjax\n  wrap: none\n  default-image-extension: png\n  css:\n    - styles.css\n  toc: true\n  \n\u001b[1mmetadata\u001b[22m\n  document-css: false\n  link-citations: true\n  date-format: long\n  lang: en\n  babelquarto:\n    languagecodes:\n      - name: en\n        text: English\n      - name: ja\n        text: 日本語\n    mainlanguage: ja\n    languages:\n      - en\n  title-en: Test Site\n  description-en: My test website\n  author-en: Joel Nitta\n  lang-en: 'yes'\n  theme: cosmo\n  title: Example\n  \nOutput created: _site/index.html\n```\n\n\n:::\n:::\n\n\n## サーブする\n\n注意：`quarto preview`が使えません\n\n\n::: {.cell}\n\n```{.r .cell-code}\nservr::httw(\"example/_site\")\n```\n:::\n\n\n---\n\n<iframe src=\"https://swcarpentry-ja.github.io/\" width=\"100%\" height=\"500px\"></iframe>\n\n[<https://swcarpentry-ja.github.io/>]{.large}\n\n## まとめ\n\n- `_quarto.yml`に`babelquarto`フィルドを加える\n- それぞれの`.qmd`ファイルの翻訳バージョンを加える\n  - `index.en.qmd`\n  - `about.en.qmd` など\n- レンダーには`babelquarto::render_website()`を使う\n\n## profiles\n\n- Use for more complex setups\n\n## github action\n\n- modified from default, needs to install r packages\n\n## what about translating content?\n\n- chatgpt custom gpt\n\n- babeldown integration with deepl\n\n## what about keeping translation up to date?\n\n- local gettext and PO files\n\n- web based apps like crowdin\n\n## take home message\n\n- i18n enbles access and grows communities!\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}